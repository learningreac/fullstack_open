{"version":3,"sources":["services/peoples.js","PersonList.js","PersonForm.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Persons","personsToShow","deletePerson","console","log","className","map","person","name","number","onClick","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumChange","onSubmit","for","type","value","onChange","Filter","showFilter","handleShowChange","Notification","message","style","color","background","fontSize","borderstyle","borderRadius","padding","marginBottom","App","useState","persons","setPersons","setNewName","setNewNum","newFilter","setFilter","setMessage","useEffect","peoplesService","initialData","regex","RegExp","length","filter","match","flex","e","target","event","preventDefault","some","window","confirm","find","p","changedPerson","targetId","returnedPerson","catch","error","updatePerson","returnedData","concat","setTimeout","fname","ReactDOM","render","document","getElementById"],"mappings":"0KACMA,EAAU,gCAuBD,EArBA,WAEX,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAmB9B,EAhBA,SAAAC,GAEX,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAc9B,EAXK,SAAAG,GAGhB,OADgBP,IAAMQ,OAAN,UAAgBT,EAAhB,YAA2BQ,IAC5BL,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAQ9B,EALA,SAACG,EAAIF,GAEhB,OADgBL,IAAMS,IAAN,UAAaV,EAAb,YAAwBQ,GAAMF,GAC/BH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,S,OCe9BM,EAlCC,SAAC,GAAqC,IAAnCC,EAAkC,EAAlCA,cAAeC,EAAmB,EAAnBA,aAE9B,OADAC,QAAQC,IAAI,gBAAiBH,GAMzB,cAJA,CAIA,SAAOI,UAAU,sBAAjB,UACI,uBAAOA,UAAU,aAAjB,SACI,+BACI,sCACA,wCACA,2CAGR,gCACKJ,EAAcK,KAAI,SAAAC,GACf,OACI,+BACI,mCAAMA,EAAOC,KAAb,OACA,mCAAMD,EAAOE,OAAb,OACA,6BACI,wBAAQJ,UAAU,yBACdK,QAAS,kBAAMR,EAAaK,EAAOV,KADvC,0BAJCU,EAAOV,aCIvBc,EAvBE,SAAC,GAA0E,IAAxEC,EAAuE,EAAvEA,UAAWC,EAA4D,EAA5DA,QAASC,EAAmD,EAAnDA,iBAAkBC,EAAiC,EAAjCA,UAAWC,EAAsB,EAAtBA,gBACnE,OACE,uBAAMC,SAAUL,EAAhB,UACE,sBAAKP,UAAU,OAAf,UACE,uBAAOa,IAAI,qBAAqBb,UAAU,aAA1C,kBACA,uBAAOc,KAAK,OAAOd,UAAU,eAC3BR,GAAG,qBAAqB,mBAAiB,YACzCuB,MAAOP,EAASQ,SAAUP,OAG9B,sBAAKT,UAAU,OAAf,UACE,uBAAOa,IAAI,uBAAuBb,UAAU,aAA5C,oBACA,uBAAOc,KAAK,SAASd,UAAU,eAC7BR,GAAG,qBAAqB,mBAAiB,cACzCuB,MAAOL,EAAWM,SAAUL,OAIhC,wBAAQG,KAAK,SAASd,UAAU,kBAAhC,yBCbFiB,EAAS,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,WAAYC,EAAuB,EAAvBA,iBAC5B,OACE,sBAAKnB,UAAU,OAAf,UACE,uBAAOa,IAAI,sBAAsBb,UAAU,aAA3C,qCACA,uBAAOc,KAAK,aAAad,UAAU,eACjCR,GAAG,sBAAsB,mBAAiB,aAC1CuB,MAAOG,EAAYF,SAAUG,QAO/BC,EAAe,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAWtB,OAAgB,OAAZA,EAAyB,KAE3B,qBAAKC,MAZc,CACnBC,MAAO,QACPC,WAAY,YACZC,SAAU,GACVC,YAAa,QACbC,aAAc,EACdC,QAAS,GACTC,aAAc,IAKd,SAA2BR,KAiJhBS,EA7IH,WAEV,MAA8BC,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAA8BF,mBAAS,IAAvC,mBAAOvB,EAAP,KAAgB0B,EAAhB,KACA,EAA+BH,mBAAS,IAAxC,mBAAOrB,EAAP,KAAkByB,EAAlB,KACA,EAA+BJ,mBAAS,IAAxC,mBAAOK,EAAP,KAAkBC,EAAlB,KACA,EAA8BN,mBAAS,MAAvC,mBAAOV,EAAP,KAAgBiB,EAAhB,KAEAC,qBAAU,WAKRC,IAEGrD,MAAK,SAAAsD,GACJR,EAAWQ,QAEd,IAGH,IAuDIC,EAAQ,IAAIC,OAAO,IAAMP,EAAW,KAClCxC,EAAqC,IAArBwC,EAAUQ,OAC5BZ,EACAA,EAAQa,QAAO,SAAA3C,GAAM,OAAIA,EAAOC,KAAK2C,MAAMJ,MAgC/C,OACE,sBAAK1C,UAAU,YAAf,UACE,oBAAIA,UAAU,kCAAd,uBACA,sBAAKA,UAAU,gDAAf,UACE,sBAAKA,UAAU,WAAWsB,MAAO,CAACyB,KAAK,GAAvC,UACE,cAAC,EAAD,CAAc1B,QAASA,IACvB,cAAC,EAAD,CAAQH,WAAYkB,EAAWjB,iBA1Bd,SAAC6B,GAExBX,EAAUW,EAAEC,OAAOlC,UA2Bb,cAAC,EAAD,CACER,UAtFQ,SAAC2C,IACjBA,EAAMC,iBAKFnB,EAAQoB,MAAK,SAAAlD,GAAM,OAAIA,EAAOC,OAASK,MAErC6C,OAAOC,QAAP,UAAkB9C,EAAlB,0EACFV,QAAQC,IAAI,gCAvBG,WACnB,IAAMG,EAAS8B,EAAQuB,MAAK,SAAAC,GAAC,OAAIA,EAAErD,OAASK,KACtCiD,EAAa,2BAAQvD,GAAR,IAAgBE,OAAQM,IACvCgD,EAAWxD,EAAOV,GACtBgD,EACUkB,EAAUD,GACjBtE,MAAK,SAAAwE,GACJ1B,EAAWD,EAAQ/B,KAAI,SAAAuD,GAAC,OAAIA,EAAEhE,KAAOkE,EAAWF,EAAIG,SAErDC,OAAM,SAAAC,GACL/D,QAAQC,IAAI,WAcZ+D,IAcFtB,EAXkB,CAChBrC,KAAMK,EACNJ,OAAQM,IAWPvB,MAAK,SAAA4E,GACJ9B,EAAWD,EAAQgC,OAAOD,OAIhC7B,EAAW,IACXC,EAAU,IACVE,EAAU,IACVC,EAAW,SAAD,OAAU9B,IACpByD,YAAW,WACT3B,EAAW,QACV,MAkDK9B,QAASA,EACTC,iBA1Ce,SAACyC,GAExBhB,EAAWgB,EAAMD,OAAOlC,QAyChBL,UAAWA,EACXC,gBAvCc,SAACqC,GAEvBb,EAAUa,EAAEC,OAAOlC,aAyCf,qBAAKf,UAAU,YAAasB,MAAO,CAACyB,KAAK,GAAzC,SAEE,cAAC,EAAD,CAASnD,cAAeA,EAAeC,aAnC1B,SAACL,GACpBM,QAAQC,IAAI,SAAUP,GACtB,IAAM0E,EAAQlC,EAAQa,QAAO,SAAAW,GAAC,OAAIA,EAAEhE,KAAOA,KAAI,GAAGW,KAC9CkD,OAAOC,QAAP,iBAAyBY,MAC3BjC,EAAWD,EAAQa,QAAO,SAAAW,GAAC,OAAIA,EAAEhE,KAAOA,MAExCgD,EACehD,GACZL,oBCtITgF,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.fe3d610a.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = 'http://localhost:3001/persons';\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl);\r\n    return request.then(response => response.data)\r\n};\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject);\r\n    return request.then(response => response.data)\r\n};\r\n\r\nconst toBeDeleted = id => { // delete is a reserverd keyword\r\n   // console.log('promise',`${baseUrl}/${id}`);\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default {getAll, create, toBeDeleted, update};","\r\n\r\nconst Persons = ({ personsToShow, deletePerson }) => {\r\n    console.log('personstoshow', personsToShow);\r\n    return (\r\n        // delete person.id  \r\n        // delete function is passed from APP, App does not know the id. the id is a local variable, it pass to the function when call it.\r\n        // notice also how the event handdler is defined here to Onclick.\r\n        // Onclick can not be assigned directly to a function call. \r\n        <table className=\"table table-striped\">\r\n            <thead className=\"table-dark\">\r\n                <tr>\r\n                    <th>Name</th>\r\n                    <th>Number</th>\r\n                    <th>Edit</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {personsToShow.map(person => {\r\n                    return (\r\n                        <tr key={person.id}>\r\n                            <td> {person.name} </td>\r\n                            <td> {person.number} </td>\r\n                            <td>\r\n                                <button className=\"btn btn-primary btn-sm\"\r\n                                    onClick={() => deletePerson(person.id)}> Delete </button>\r\n                            </td>\r\n                        </tr>\r\n                    )\r\n                }\r\n                )}\r\n            </tbody>\r\n        </table>\r\n    )\r\n};\r\n\r\nexport default Persons;","\r\nconst PersonForm = ({ addPerson, newName, handleNameChange, newNumber, handleNumChange }) => {\r\n    return (\r\n      <form onSubmit={addPerson}>\r\n        <div className=\"mb-2\">\r\n          <label for=\"phonebookNameInput\" className=\"form-label\">Name</label>\r\n          <input type=\"name\" className=\"form-control\"\r\n            id=\"phonebookNameInput\" aria-describedby=\"nameInput\"\r\n            value={newName} onChange={handleNameChange} />\r\n        </div>\r\n  \r\n        <div className=\"mb-2\">\r\n          <label for=\"phonebookNumberInput\" className=\"form-label\">Number</label>\r\n          <input type=\"number\" className=\"form-control\"\r\n            id=\"phonebookNameInput\" aria-describedby=\"NumberInput\"\r\n            value={newNumber} onChange={handleNumChange} />\r\n        </div>\r\n  \r\n  \r\n        <button type=\"submit\" className=\"btn btn-primary\">Add New</button>\r\n      </form>\r\n    )\r\n  };\r\n\r\n  export default PersonForm;","import React, { useEffect, useState } from 'react';\r\nimport peoplesService from './services/peoples';\r\nimport Persons from './PersonList';\r\nimport PersonForm from './PersonForm';\r\n//must run json server to get the intial data\r\n\r\nconst Filter = ({ showFilter, handleShowChange }) => {\r\n  return (\r\n    <div className=\"mb-3\">\r\n      <label for=\"phonebookNameFilter\" className=\"form-label\">Filter Shown Name with:</label>\r\n      <input type=\"nameFilter\" className=\"form-control\"\r\n        id=\"phonebookNameFilter\" aria-describedby=\"nameFilter\"\r\n        value={showFilter} onChange={handleShowChange} />\r\n    </div>\r\n\r\n  )\r\n};\r\n\r\n\r\nconst Notification = ({ message }) => {\r\n  const messageStyle = {\r\n    color: 'green',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderstyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  };\r\n\r\n  if (message === null) return null\r\n  return (\r\n    <div style={messageStyle}>{message}</div>\r\n  )\r\n};\r\n\r\nconst App = () => {\r\n\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState('');\r\n  const [newNumber, setNewNum] = useState('');\r\n  const [newFilter, setFilter] = useState('');\r\n  const [message, setMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    /*console.log('effect');\r\n    axios\r\n      .get('http://localhost:3001/persons')\r\n      .then(response => setPersons(response.data)) */\r\n    peoplesService\r\n      .getAll()\r\n      .then(initialData => {\r\n        setPersons(initialData)\r\n      })\r\n  }, []);\r\n\r\n\r\n  const updatePerson = () => {\r\n    const person = persons.find(p => p.name === newName);\r\n    const changedPerson = { ...person, number: newNumber };\r\n    let targetId = person.id;\r\n    peoplesService\r\n      .update(targetId, changedPerson)\r\n      .then(returnedPerson => {\r\n        setPersons(persons.map(p => p.id !== targetId ? p : returnedPerson))\r\n      })\r\n      .catch(error => {\r\n        console.log('fail')\r\n      })\r\n  };\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    //console.log('button clicked', event.target);  \r\n    // console.log('repeated?',persons.every(person => person.name === newName)) \r\n    //change from array.every() to array.some\r\n\r\n    if (persons.some(person => person.name === newName)) {\r\n      //alert(`${newName} is already added to phonebook`);\r\n      if (window.confirm(`${newName} is already added to phonebook,replace the old number with new one?`)) {\r\n        console.log('confirms workd to be updated');\r\n        updatePerson();\r\n      }\r\n    } else {\r\n      const personObj = {\r\n        name: newName,\r\n        number: newNumber\r\n      };\r\n\r\n      /*axios\r\n        .post('http://localhost:3001/persons', personObj)\r\n        .then(response => {\r\n          setPersons(persons.concat(response.data));\r\n        });\r\n      */\r\n      peoplesService\r\n        .create(personObj)\r\n        .then(returnedData => {\r\n          setPersons(persons.concat(returnedData))\r\n        })\r\n    };\r\n    //setPersons(persons.concat(personObj));\r\n    setNewName('');\r\n    setNewNum('');\r\n    setFilter('');\r\n    setMessage(`Added ${newName}`);\r\n    setTimeout(() => {\r\n      setMessage(null)\r\n    }, 5000)\r\n\r\n  };\r\n\r\n  let regex = new RegExp('^' + newFilter, \"i\"); // '^' means start with that letter\r\n  const personsToShow = newFilter.length === 0\r\n    ? persons\r\n    : persons.filter(person => person.name.match(regex))\r\n\r\n  const handleNameChange = (event) => {\r\n    //console.log(event.target.value);\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumChange = (e) => {\r\n    // console.log(typeof e.target.value);\r\n    setNewNum(e.target.value);\r\n  };\r\n\r\n  const handleShowChange = (e) => {\r\n    //console.log(e.target.value);\r\n    setFilter(e.target.value);\r\n  };\r\n\r\n  const deletePerson = (id) => {\r\n    console.log('delete', id)\r\n    const fname = persons.filter(p => p.id === id)[0].name;\r\n    if (window.confirm(`Delete ${fname}`)) {\r\n      setPersons(persons.filter(p => p.id !== id));\r\n\r\n      peoplesService\r\n        .toBeDeleted(id)\r\n        .then()\r\n\r\n    }\r\n  };\r\n\r\n\r\n\r\n  return (\r\n    <div className='container'>\r\n      <h1 className=\"text-center text-uppercase pt-5\">Phonebook</h1>\r\n      <div className='main d-flex flex-column d-sm-flex flex-sm-row'>\r\n        <div className='left p-3' style={{flex:1}}>\r\n          <Notification message={message} />\r\n          <Filter showFilter={newFilter} handleShowChange={handleShowChange} />\r\n\r\n          {/* <h2 className=\"text-center text-uppercase pt-3\">Add a new</h2> */}\r\n          <PersonForm\r\n            addPerson={addPerson}\r\n            newName={newName}\r\n            handleNameChange={handleNameChange}\r\n            newNumber={newNumber}\r\n            handleNumChange={handleNumChange}\r\n          />\r\n        </div>\r\n\r\n        <div className='right p-3'  style={{flex:2}}>\r\n          {/* <h2 className=\"text-center text-uppercase pt-3\">Numbers</h2> */}\r\n          <Persons personsToShow={personsToShow} deletePerson={deletePerson} />\r\n        </div>\r\n      </div>\r\n\r\n\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\n\r\n\r\n\r\nReactDOM.render(\r\n  <App />, \r\n  document.getElementById('root')\r\n)"],"sourceRoot":""}