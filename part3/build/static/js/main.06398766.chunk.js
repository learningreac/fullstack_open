(this.webpackJsonpcourseinfo=this.webpackJsonpcourseinfo||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var c=t(15),o=t.n(c),r=t(6),a=t(3),u=t(2),i=t(4),s=t.n(i),l="http://localhost:3001/api/persons",d=function(){return s.a.get(l).then((function(e){return e.data}))},h=function(e){return s.a.post(l,e).then((function(e){return e.data}))},b=function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},j=function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},f=t(0),m=function(e){var n=e.showFilter,t=e.handleShowChange;return Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:"filter shown with:"}),Object(f.jsx)("input",{value:n,onChange:t})]})},O=function(e){var n=e.addPerson,t=e.newName,c=e.handleNameChange,o=e.newNumber,r=e.handleNumChange;return Object(f.jsxs)("form",{onSubmit:n,children:[Object(f.jsx)("label",{children:"Name:"}),Object(f.jsx)("input",{value:t,onChange:c}),Object(f.jsx)("br",{}),Object(f.jsx)("label",{children:"Number:"}),Object(f.jsx)("input",{value:o,onChange:r}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){var n=e.personsToShow,t=e.deletePerson;return console.log("personstoshow",n),Object(f.jsx)("ul",{children:n.map((function(e){return Object(f.jsxs)("li",{children:[" ",e.name," ",e.number,Object(f.jsx)("button",{onClick:function(){return t(e.id)},children:" Delete "})]},e.id)}))})},p=function(e){var n=e.message;return null===n?null:Object(f.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderstyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},x=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(u.useState)(""),i=Object(a.a)(o,2),s=i[0],l=i[1],x=Object(u.useState)(""),w=Object(a.a)(x,2),v=w[0],N=w[1],S=Object(u.useState)(""),C=Object(a.a)(S,2),k=C[0],y=C[1],P=Object(u.useState)(null),D=Object(a.a)(P,2),E=D[0],T=D[1];Object(u.useEffect)((function(){d().then((function(e){c(e)}))}),[]);var A=new RegExp("^"+k,"i"),B=0===k.length?t:t.filter((function(e){return e.name.match(A)}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Phonebook"}),Object(f.jsx)(p,{message:E}),Object(f.jsx)(m,{showFilter:k,handleShowChange:function(e){y(e.target.value)}}),Object(f.jsx)("h2",{children:"Add a new"}),Object(f.jsx)(O,{addPerson:function(e){(e.preventDefault(),t.some((function(e){return e.name===s})))?window.confirm("".concat(s," is already added to phonebook,replace the old number with new one?"))&&(console.log("confirms workd to be updated"),function(){var e=t.find((function(e){return e.name===s})),n=Object(r.a)(Object(r.a)({},e),{},{number:v}),o=e.id;j(o,n).then((function(e){c(t.map((function(n){return n.id!==o?n:e})))})).catch((function(e){console.log("fail")}))}()):h({name:s,number:v}).then((function(e){c(t.concat(e))}));l(""),N(""),y(""),T("Added ".concat(s)),setTimeout((function(){T(null)}),5e3)},newName:s,handleNameChange:function(e){l(e.target.value)},newNumber:v,handleNumChange:function(e){N(e.target.value)}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(g,{personsToShow:B,deletePerson:function(e){console.log("delete",e);var n=t.filter((function(n){return n.id===e}))[0].name;window.confirm("Delete ".concat(n))&&(c(t.filter((function(n){return n.id!==e}))),b(e).then())}})]})};o.a.render(Object(f.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.06398766.chunk.js.map